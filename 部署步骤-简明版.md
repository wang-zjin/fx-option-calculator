# 外汇期权计算器 — 部署步骤（简明版）

按下面顺序做即可完成部署。

---

## 一、准备工作（只需做一次）

### 1. 安装 Node.js

- 若未安装：到 [https://nodejs.org](https://nodejs.org) 下载并安装 LTS 版本。
- 验证：打开终端，输入 `node -v` 和 `npm -v`，能看到版本号即成功。

### 2. 进入项目目录

在终端里执行（把路径换成你电脑上的实际路径）：

```bash
cd "/Users/irtg/Documents/交通银行/金融市场部/外汇期权计算器"
```

### 3. 安装依赖

```bash
npm install
```

出现 “added xxx packages” 且无报错即完成。

---

## 二、本地运行（开发/自测）

### 方式 A：命令行

```bash
npm run dev
```

终端会显示类似：`Local: http://localhost:5173/`  
用浏览器打开这个地址即可使用。

### 方式 B：一键启动（若已有脚本）

- 双击项目根目录下的 **`启动Web界面.command`**（Mac），或在终端执行：
  ```bash
  ./启动Web界面.sh
  ```
- 脚本会自动安装依赖、启动服务并打开浏览器。

停止服务：在运行 `npm run dev` 的终端里按 **Ctrl + C**。

---

## 三、构建生产包（打正式包）

在项目根目录执行：

```bash
npm run build
```

- 成功后会生成 **`dist`** 文件夹，里面是打包好的网页文件（HTML、JS、CSS 等）。
- 若报错，先看终端里的错误信息（多半是 TypeScript 或依赖问题）。

---

## 四、部署到服务器（把网站放到网上）

思路：把 **`dist` 里的全部内容** 上传到一台能提供静态网页的服务器。

### 方式 1：本机用 Nginx 提供网页（适合内网/本机访问）

1. 安装 Nginx（Mac 可用 `brew install nginx`）。
2. 把 **整个 `dist` 目录** 复制到 Nginx 的网站根目录（例如 `/usr/local/var/www` 或你配置的 `root` 路径）。
3. 确保 Nginx 配置里该站点的 `root` 指向 `dist` 所在目录。
4. 重启 Nginx，用浏览器访问你配置的地址（如 `http://localhost:8080`）。

### 方式 2：公司/行内服务器（FTP 或 SSH 上传）

1. 用 **FTP 工具**（如 FileZilla）或 **SSH** 登录到服务器。
2. 把本机 **`dist` 文件夹里的所有文件**（不是 dist 文件夹本身）上传到服务器上网站根目录（例如 `www`、`html`、`public_html` 等）。
3. 确保服务器已配置好静态网站（如 Nginx/Apache 指向该目录）。
4. 用浏览器访问该服务器的域名或 IP 即可。

### 方式 3：静态托管（如 Vercel / Netlify）

1. 在 [Vercel](https://vercel.com) 或 [Netlify](https://netlify.com) 注册账号。
2. 新建项目，选择「上传已有构建」或「从本地部署」。
3. 把 **`dist`** 目录内容上传（或选择「连接 Git 仓库」后把构建命令设为 `npm run build`，发布目录设为 `dist`）。
4. 部署完成后会得到一个公网地址，分享该链接即可访问。

---

## 五、本地预览构建结果（不部署也能看效果）

想先确认 `dist` 打包出来是否正常，可在本机执行：

```bash
npm run preview
```

终端会提示一个地址（如 `http://localhost:4173`），用浏览器打开即可预览 **和生产环境一致** 的页面。

---

## 六、部署到 iOS 真机/模拟器（可选）

项目已集成 Capacitor，可打包成 iOS 应用：

1. **先打 Web 包**：
   ```bash
   npm run build
   ```

2. **同步到 iOS 工程**：
   ```bash
   npx cap sync ios
   ```

3. **用 Xcode 打开**：
   ```bash
   npx cap open ios
   ```
   在 Xcode 里选择模拟器或真机，点击运行即可。

（需已安装 Xcode 和 CocoaPods；首次可先执行 `cd ios/App && pod install`。）

---

## 常见问题

| 现象 | 处理 |
|------|------|
| `npm install` 很慢或超时 | 可切换国内镜像：`npm config set registry https://registry.npmmirror.com` |
| `npm run build` 报错 | 看终端第一行报错；常见是 TS 类型错误或路径问题，按提示改即可 |
| 部署后打开页面空白 | 检查是否把 **dist 里的内容** 放到网站根目录，且服务器指向正确 |
| 部署后刷新 404 | 若用 Nginx，需配置 try_files 回退到 index.html（单页应用路由） |

---

## 小结：最简 3 步部署

1. **`npm install`** → 安装依赖  
2. **`npm run build`** → 生成 `dist`  
3. 把 **`dist` 里的全部文件** 上传到服务器网站根目录  

完成以上步骤后，通过服务器域名或 IP 即可访问你的外汇期权计算器。
